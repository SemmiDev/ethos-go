# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================
# General application settings
APP_NAME=ethos-go
APP_ENV=dev
# URL where the backend is accessible
APP_URL=http://localhost:8080
# URL where the frontend is accessible (for CORS and links)
APP_CLIENT_URL=http://localhost:5173

# ==============================================================================
# SERVER CONFIGURATION
# ==============================================================================
SERVER_HOST=0.0.0.0
SERVER_PORT=8080

# ==============================================================================
# DATABASE CONFIGURATION (Application Connection)
# ==============================================================================
# Configuration for the Go application to connect to PostgreSQL
DB_HOST=postgresql
DB_PORT=5432
DB_USER=ethosgo
DB_PASSWORD=CHANGE_ME
DB_DB=ethosgo
DB_SSL_MODE=disable

# ==============================================================================
# REDIS CONFIGURATION
# ==============================================================================
# Configuration for Redis cache and task queue
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
# Optional: REDIS_PASSWORD=CHANGE_ME

# ==============================================================================
# AUTHENTICATION & SECURITY
# ==============================================================================
# JWT Security Settings
AUTH_JWT_SECRET=super-secret-key-that-is-at-least-32-chars-long
AUTH_ACCESS_TOKEN_EXPIRY=15m
AUTH_REFRESH_TOKEN_EXPIRY=24h

# Google OAuth 2.0 Configuration
# Obtain these from Google Cloud Console -> APIs & Services -> Credentials
GOOGLE_CLIENT_ID=CHANGE_ME
GOOGLE_CLIENT_SECRET=CHANGE_ME
GOOGLE_CALLBACK_URL=http://localhost:8080/auth/google/callback

# ==============================================================================
# EMAIL / SMTP CONFIGURATION
# ==============================================================================
# Settings for sending emails (e.g., password reset, notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=change_me@gmail.com
# App Password (not your granular Google account password)
SMTP_PASSWORD=CHANGE_ME

# ==============================================================================
# OBSERVABILITY (OpenTelemetry & Logging)
# ==============================================================================
# OpenTelemetry (Tracing & Metrics)
OTEL_EXPORTER_OTLP_ENDPOINT=tempo:4317
OTEL_ENABLE_TRACING=true
OTEL_ENABLE_METRICS=true
OTEL_SAMPLE_RATE=1.0
OTEL_SERVICE_NAME=ethosgo-app

# Application Logging
LOGGER_LEVEL=info
LOGGER_OUTPUT=stdout
# Log file path (if output is file)
LOGGER_FILE=/app/logs/app.log
# Rotation settings
LOGGER_MAX_SIZE=100
LOGGER_MAX_BACKUPS=3
LOGGER_MAX_AGE=28
LOGGER_COMPRESS=true
# Metrics logging interval
LOGGER_TICK="10s"
LOGGER_THRESHOLD=10
LOGGER_RATE=0.3

# Event (Canonical Log Lines) - one comprehensive log per request
EVENT_SAMPLE_RATE=0.05
EVENT_P99_THRESHOLD_MS=2000

# ==============================================================================
# NATS (Event Messaging)
# ==============================================================================
NATS_URL=nats://nats:4222
NATS_STREAM_NAME=ETHOS_EVENTS
NATS_CONSUMER_NAME=ethos-worker
NATS_MAX_RECONNECTS=10

# ==============================================================================
# CONTAINER CONFIGURATION (Docker Compose)
# ==============================================================================
# These variables are used by Docker Compose to initialize services.
# They are not directly used by the Go application logic but are required for the environment.

# PostgreSQL Init (matches DB_*)
POSTGRES_USER=ethosgo
POSTGRES_PASSWORD=CHANGE_ME
POSTGRES_DB=ethosgo

# Grafana Init
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME
GF_USERS_ALLOW_SIGN_UP=false
GF_AUTH_ANONYMOUS_ENABLED=true
GF_AUTH_ANONYMOUS_ORG_ROLE=Viewer
